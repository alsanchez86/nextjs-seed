swagger: '2.0'
info:
  description: Api Documentation
  version: '1.0'
  title: Api Documentation
  termsOfService: 'urn:tos'
  contact: {}
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0'
host: 'localhost:8083'
basePath: /
tags:
  - name: Competencias
    description: Competencias Controller Impl
  - name: basic-error-controller
    description: Basic Error Controller
  - name: operation-handler
    description: Operation Handler
  - name: web-mvc-endpoint-handler-mapping
    description: Web Mvc Endpoint Handler Mapping
paths:
  /actuator:
    get:
      tags:
        - web-mvc-endpoint-handler-mapping
      summary: links
      operationId: linksUsingGET
      produces:
        - application/json
        - application/vnd.spring-boot.actuator.v2+json
      responses:
        '200':
          description: OK
          schema:
            type: object
            additionalProperties:
              type: object
              additionalProperties:
                $ref: '#/definitions/Link'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
  /actuator/health:
    get:
      tags:
        - operation-handler
      summary: handle
      operationId: handleUsingGET
      produces:
        - application/json
        - application/vnd.spring-boot.actuator.v2+json
      parameters:
        - in: body
          name: body
          description: body
          required: false
          schema:
            type: object
            additionalProperties:
              type: string
      responses:
        '200':
          description: OK
          schema:
            type: object
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
  /actuator/info:
    get:
      tags:
        - operation-handler
      summary: handle
      operationId: handleUsingGET_1
      produces:
        - application/json
        - application/vnd.spring-boot.actuator.v2+json
      parameters:
        - in: body
          name: body
          description: body
          required: false
          schema:
            type: object
            additionalProperties:
              type: string
      responses:
        '200':
          description: OK
          schema:
            type: object
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
  /error:
    get:
      tags:
        - basic-error-controller
      summary: error
      operationId: errorUsingGET
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            type: object
            additionalProperties:
              type: object
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
    head:
      tags:
        - basic-error-controller
      summary: error
      operationId: errorUsingHEAD
      consumes:
        - application/json
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            type: object
            additionalProperties:
              type: object
        '204':
          description: No Content
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
    post:
      tags:
        - basic-error-controller
      summary: error
      operationId: errorUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            type: object
            additionalProperties:
              type: object
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
    put:
      tags:
        - basic-error-controller
      summary: error
      operationId: errorUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            type: object
            additionalProperties:
              type: object
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
    delete:
      tags:
        - basic-error-controller
      summary: error
      operationId: errorUsingDELETE
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            type: object
            additionalProperties:
              type: object
        '204':
          description: No Content
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
    options:
      tags:
        - basic-error-controller
      summary: error
      operationId: errorUsingOPTIONS
      consumes:
        - application/json
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            type: object
            additionalProperties:
              type: object
        '204':
          description: No Content
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
    patch:
      tags:
        - basic-error-controller
      summary: error
      operationId: errorUsingPATCH
      consumes:
        - application/json
      produces:
        - '*/*'
      responses:
        '200':
          description: OK
          schema:
            type: object
            additionalProperties:
              type: object
        '204':
          description: No Content
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
  '/skills/levels/{language-code}':
    get:
      tags:
        - Competencias
      summary: Consultar niveles de competencias
      description: Servicio que lista los niveles de experiencia disponibles en un idioma
      operationId: listarNivelesExperienciaUsingGET
      produces:
        - '*/*'
      parameters:
        - name: language-code
          in: path
          description: Idioma con los que mostraran los niveles
          required: true
          type: string
      responses:
        '200':
          description: Ok. Listado de niveles para las competencias
          schema:
            type: array
            items:
              $ref: '#/definitions/ResponseGetSkillsLevels'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: >-
            El servidor no pudo encontrar los niveles de experiencia para el
            idioma
          schema:
            $ref: '#/definitions/ErrorDetails'
  /skills/applicants:
    get:
      tags:
        - Competencias
      summary: 'Buscar competencias de las personas según codigo de competencia, nivel y estado competencias'
      description: >-
        Servicio que consulta las competencias de las personas.
        <br><b>parameters={[comp,estado,nivel]}&filter=1 </b> //busqueda de personas
        con minimo uno de los siguientes parametros (comp, estado y/o nivel)
        METAJOB-73
        <br><b>parameters={[comp,estado,nivel],[comp2,estado2,nivel2]}&filtro=2
        </b>//busqueda de personas que deben cumplir minimo una de las
        agrupaciones de los parametros(comp, estado y nivel) contemplando que
        las agrupaciones pueden no estar completas METAJOB-88
        <br><b>parameters={[comp,estado,nivel],[comp2,estado2,nivel2]}&filtro=3
        </b>//busqueda de personas que deben cumplir todas las agrupaciones de
        los parametros(comp, estado y nivel) contemplando que las agrupaciones
        pueden no estar completas METAJOB-165
      operationId: consultarpersonaCompetenciaUsingGET
      produces:
        - '*/*'
      parameters:
        - name: parameters
          in: query
          description: Los filtros para buscar
          required: false
          type: string
        - name: filter
          in: query
          description: 'Identificar que filtro vamos a realizar (1, 2 o 3)'
          required: false
          type: string
          default: '1'
        - name: page
          in: query
          description: Indica el numero de pagina a mostrar
          required: false
          type: string
          default: '0'
        - name: size
          in: query
          description: Indica la cantidad de número de registros por página
          required: false
          type: string
          default: '10'
        - name: sortBy
          in: query
          description: Indica el campo y tipo por el cual se desea ordenar
          required: false
          type: string
          default: codCompetencia
      responses:
        '200':
          description: Ok. Listado de competencias
          schema:
            type: array
            items:
              $ref: '#/definitions/ResponseGetSkillsApplicants'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: No se ha encontrado la persona solicitada
          schema:
            $ref: '#/definitions/ErrorDetails'
    post:
      tags:
        - Competencias
      summary: Registrar competencia /s para una persona
      description: >-
        Servicio que registra una o mas competencias a una persona.<br> No
        creamos valores. No generamos nuevos datos. Simplemente es una
        asociación. Si una persona ya tiene asignada esa competencia, no se
        permitirá asignarla. Si tiene asignada esa competencia devolverá un
        mensaje de validacion indicando que ya tiene asignada esa competencia.
        Estado a PENDIENTE_VALIDAR <b>Si se cargan masivamente las competencias
        y encuentra una que ya esta asignada, mostrará un mensaje indicandolo
        pero el resto las asignará correctamente.</b>
      operationId: registrarCompetenciaApersonaUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: body
          description: Valores de competencia a registrar a la persona
          required: true
          schema:
            type: array
            items:
              $ref: '#/definitions/personaCompetenciaDTO'
      responses:
        '201':
          description: Se ha registrado la competencia a la persona
          schema:
            $ref: '#/definitions/ResponsePostSkillsApplicants'
        '400':
          description: La solicitud no pudo ser interpretada por una sintaxis inválida
          schema:
            $ref: '#/definitions/ErrorDetailsFields'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: >-
            El servidor no pudo encontrar los datos nivel, estado, fuente u
            origen
          schema:
            $ref: '#/definitions/ErrorDetails'
    put:
      tags:
        - Competencias
      summary: Modificar competencias de una persona
      description: >-
        Servicio que actualiza las competencia de una persona. <br> Podemos
        modificar una o varias competencias. Por ejemplo aumentar el nivel de
        experiencia
      operationId: actualizarCompetenciapersonaUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: listpersonaCompetenciaRequest
          description: Valores de competencia de la persona a modificar
          required: false
          schema:
            type: array
            items:
              $ref: '#/definitions/ActualizarpersonaCompetenciaDTO'
      responses:
        '201':
          description: Se ha modificado la/s competencia/s de la persona
          schema:
            type: array
            items:
              $ref: '#/definitions/ResponsePutSkillsApplicants'
        '400':
          description: La solicitud no pudo ser interpretada por una sintaxis inválida
          schema:
            $ref: '#/definitions/ErrorDetailsFields'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: El servidor no pudo encontrar los datos
          schema:
            $ref: '#/definitions/ErrorDetails'
  '/skills/applicants/{applicant-code}':
    get:
      tags:
        - Competencias
      summary: Consultar las competencias de un demandante
      description: ->
        Servicio que permite consultar las competencias asociadas a una persona, a través de su código. Puede ser <b>detailed</b> o <b>reduced</b> <br> <b> Ejm
        /skills/applicants/{applicant-code}?query=detailed&page=0&size=1&sortBy=skill-code </b>
      operationId: consultarCompetenciasUsingGET
      produces:
        - '*/*'
      parameters:
        - name: applicant-code
          in: path
          description: Código de la persona
          required: true
          type: string
        - name: query
          in: query
          description: detailed/reduced (informacion de las competencias)
          required: true
          type: string
        - name: page
          in: query
          description: El numero de pagina a mostrar
          required: false
          type: string
          default: '0'
        - name: size
          in: query
          description: Cantidad de registros por página
          required: false
          type: string
          default: '10'
        - name: sortBy
          in: query
          description: Campo y orden por el cual se desea ordenar
          required: false
          type: string
          default: skill-code
      responses:
        '200':
          description: Ok. Listado reducido de competencias
          schema:
            type: array
            items:
              $ref: '#/definitions/ResponseGetSkillsApplicantsByCode'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: No se ha encontrado la persona solicitada
          schema:
            $ref: '#/definitions/ErrorDetails'
  '/skills/sources/{language-code}':
    get:
      tags:
        - Competencias
      summary: Consultar fuentes de competencias
      description: Servicio que lista las fuentes disponibles en un idioma
      operationId: listarFuentesUsingGET
      produces:
        - '*/*'
      parameters:
        - name: language-code
          in: path
          description: Idioma con los que mostraran las fuentes
          required: true
          type: string
      responses:
        '200':
          description: Ok. Listado de fuentes para las competencias
          schema:
            type: array
            items:
              $ref: '#/definitions/ResponseGetSkillsSources'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: El servidor no pudo encontrar las fuentes para el idioma
          schema:
            $ref: '#/definitions/ErrorDetails'
  '/skills/{skill-code}/applicants/{applicant-code}':
    get:
      tags:
        - Competencias
      summary: Consultar detalle de competencia asociada a una persona
      description: >-
        Servicio que consulta el detalle de una competencia asociada a una
        persona. <br> Si se indica una persona no disponible en el sistema se
        devolverá un error indicando que no se han encontrado datos. Si se
        indica una competencia no disponible en el sistema para esa persona se
        devolverá un error indicando que no se han encontrado datos
      operationId: obtenerDetalleCompetenciapersonaUsingGET
      produces:
        - '*/*'
      parameters:
        - name: skill-code
          in: path
          description: Código de la competencia
          required: true
          type: string
        - name: applicant-code
          in: path
          description: Código de la persona
          required: true
          type: string
      responses:
        '200':
          description: Detalle de la competencia de la persona
          schema:
            $ref: '#/definitions/ResponseGetSkillsByCodeApplicantsByCode'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: >-
            El servidor no pudo encontrar datos de la competencia para esa
            persona
          schema:
            $ref: '#/definitions/ErrorDetails'
    put:
      tags:
        - Competencias
      summary: Cancelar/Validar la competencia para una persona
      description: >-
        Servicio cancelará o validará la competencia de la persona, dependiendo
        del estado enviado.
      operationId: actualizarCompetenciaApersonaUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: skill-code
          in: path
          description: Código de la competencia
          required: true
          type: string
        - name: applicant-code
          in: path
          description: Código de la persona
          required: true
          type: string
        - in: body
          name: contenidoValidacion
          description: Estado para cambiar la competencia (validar/cancelar)
          required: true
          schema:
            $ref: '#/definitions/ContenidoValidacionDTO'
      responses:
        '201':
          description: Operación exitosa
          schema:
            $ref: '#/definitions/ResponsePutSkillsByCodeApplicantsByCode'
        '400':
          description: La solicitud no pudo ser interpretada por una sintaxis inválida
          schema:
            $ref: '#/definitions/ErrorDetailsFields'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: El servidor no pudo realizar esta acción
          schema:
            $ref: '#/definitions/ErrorDetails'
definitions:
  ActualizarpersonaCompetenciaDTO:
    type: object
    required:
      - skill-code
      - update-user
      - applicant-code
      - level-code
      - origin-skill-code
      - origin-level-code
      - state-code
    properties:
      level-code:
        type: string
        
      origin-skill-code:
        type: string
        
      origin-level-code:
        type: string
        
      applicant-code:
        type: string
        
      skill-code:
        type: string
        
      sources:
        type: array
        
        items:
          $ref: '#/definitions/FuenteDTO'
      state-code:
        type: string
        
      update-user:
        type: string
        
    title: ActualizarpersonaCompetenciaDTO
  CompetenciaReducidapersonaDTO:
    type: object
    required:
      - applicant-code
      - skill-code
      - state-code
    properties:
      level:
        $ref: '#/definitions/NivelResponseDTO'
      applicant-code:
        type: string
        
      skill-code:
        type: string
        
      state-code:
        type: string
        
    title: CompetenciaReducidapersonaDTO
  ContenidoValidacionDTO:
    type: object
    required:
      - state-code
      - update-user
    properties:
      rejection-motive:
        type: string
        description: >-
          Motivo por el cual se ha cancelado. En validar no es necesario añadir
          este campo.
        
      sources:
        type: array
        description: Es posible cambiar las fuentes cuando se valida.
        
        items:
          $ref: '#/definitions/FuenteDTO'
      state-code:
        type: string
        description: Estado para cambiar la competencia (validar/cancelar)
        
      update-user:
        type: string
        description: Quien a validado/cancelado la competencia de la persona
        
    title: ContenidoValidacionDTO
  ErrorDetails:
    type: object
    properties:
      details:
        type: string
      message:
        type: string
      timestamp:
        type: string
        format: date-time
    title: ErrorDetails
  ErrorDetailsFields:
    type: object
    properties:
      fields:
        type: array
        items:
          $ref: '#/definitions/InvalidFields'
      state:
        type: integer
        format: int32
      message:
        type: string
    title: ErrorDetailsFields
  FuenteCompetenciaDTO:
    type: object
    required:
      - end-date
      - source-code
      - start-date
    properties:
      certificate:
        type: string
        
      degree:
        type: string
        
      duration:
        type: integer
        format: int32
        
      end-date:
        type: string
        format: date-time
        
      formation-type:
        type: string
        
      occupation-code:
        type: string
        
      qualification-code:
        type: string
        
      source-code:
        type: string
        
      start-date:
        type: string
        format: date-time
        
    title: FuenteCompetenciaDTO
  FuenteDTO:
    type: object
    required:
      - source-code
      - start-date
    properties:
      certificate:
        type: string
        
      duration:
        type: string
        
      end-date:
        type: string
        
      formation-type:
        type: string
        
      occupation-code:
        type: string
        
      qualification-code:
        type: string
        
      source-code:
        type: string
        
      start-date:
        type: string
        
      degree:
        type: string
        
    title: FuenteDTO
  InvalidFields:
    type: object
    properties:
      message:
        type: string
      field-name:
        type: string
    title: InvalidFields
  Link:
    type: object
    properties:
      href:
        type: string
      templated:
        type: boolean
    title: Link
  ListarFuentesDTO:
    type: object
    properties: 
      source-code: 
        type: string
      description:
        type: string
      name:
        type: string
    title: ListarFuentesDTO
  NivelDTO:
    type: object
    required:
      - importance
      - level-code
      - name
    properties:
      description:
        type: string
      importance:
        type: integer
        format: int32
        
      level-code:
        type: string
        
      name:
        type: string
        
    title: NivelDTO
  NivelResponseDTO:
    type: object
    properties:
      importance:
        type: integer
        format: int32
      level-code:
        type: string
    title: NivelResponseDTO
  ObtenerDetalleCompetenciapersonaDTO:
    type: object
    properties:
      creation-date:
        type: string
        format: date-time
      creation-user:
        type: string
      level:
        $ref: '#/definitions/NivelResponseDTO'
      origin-skill-code:
        type: string
      applicant-code:
        type: string
      rejection-motive:
        type: string
      skill-code:
        type: string
      sources:
        type: array
        items:
          $ref: '#/definitions/FuenteCompetenciaDTO'
      state-code:
        type: string
      update-date:
        type: string
        format: date-time
        
      update-user:
        type: string
        
    title: ObtenerDetalleCompetenciapersonaDTO
  personaCompetenciaDTO:
    type: object
    required:
      - level-code
      - origin-level-code
      - origin-skill-code
      - applicant-code
      - skill-code
      - sources
      - state-code
      - creation-user
    properties:
        
      creation-user:
        type: string
        
      level-code:
        type: string
        
      origin-level-code:
        type: string
        
      origin-skill-code:
        type: string
        
      applicant-code:
        type: string
        
      rejection-motive:
        type: string
        
      skill-code:
        type: string
        
      sources:
        type: array
        
        items:
          $ref: '#/definitions/FuenteDTO'
      state-code:
        type: string
        
    title: personaCompetenciaDTO
  personaCompetenciaResponseDTO:
    type: object
    required:
      - origin-level-code
      - origin-skill-code
      - applicant-code
      - skill-code
      - sources
      - state-code
    properties:
      creation-date:
        type: string
        format: date-time
        
      creation-user:
        type: string
        
      level:
        $ref: '#/definitions/NivelResponseDTO'
      origin-level-code:
        type: string
        
      origin-skill-code:
        type: string
        
      applicant-code:
        type: string
        
      rejection-motive:
        type: string
        
      skill-code:
        type: string
        
      sources:
        type: array
        
        items:
          $ref: '#/definitions/FuenteCompetenciaDTO'
      state-code:
        type: string
        
      update-date:
        type: string
        format: date-time
        
      update-user:
        type: string
        
    title: personaCompetenciaResponseDTO
  RegistrarCompetenciasDTO:
    type: object
    required:
      - skills
    properties:
      skills:
        type: array
        
        items:
          $ref: '#/definitions/CompetenciaReducidapersonaDTO'
      validations:
        type: array
        
        items:
          $ref: '#/definitions/InvalidFields'
    title: RegistrarCompetenciasDTO
  RespuestaActualizarpersonaCompetenciaDTO:
    type: object
    required:
      - skills
    properties:
      skills:
        type: array
        
        items:
          $ref: '#/definitions/personaCompetenciaResponseDTO'
      validations:
        type: array
        
        items:
          $ref: '#/definitions/InvalidFields'
    title: RespuestaActualizarpersonaCompetenciaDTO
  ValidarpersonaCompetenciaDTO:
    type: object
    required:
      - skill
    properties:
      skill:
        
        $ref: '#/definitions/personaCompetenciaResponseDTO'
      validations:
        type: array
        
        items:
          $ref: '#/definitions/InvalidFields'
    title: ValidarpersonaCompetenciaDTO
  ResponseGetSkillsLevels:
    type: object
    properties:
      messages:
        $ref: '#/definitions/ResponseMessages'
      data:
        $ref : '#/definitions/ResponseDataSkillsLevels'
  ResponseMessages:
    type: array
    items: 
      $ref: '#/definitions/ResponseMessage'
  ResponseMessage:
    type: object
    properties:
      'type': 
        type: string
      alias:
        type: string
      message:
        type: string
  ResponseDataSkillsLevels:
    type: object
    properties:
      levels:
        $ref: '#/definitions/ResponseArraySkillsLevels'
  ResponseArraySkillsLevels:
    type: array
    items:
        $ref: '#/definitions/NivelDTO'
  ResponseDataSkillsApplicants:
    type: object
    properties:
      skills:
        $ref: '#/definitions/ResponseArraySkillsApplicants'
  ResponseArraySkillsApplicants:
    type: array
    items:
        $ref: '#/definitions/personaCompetenciaResponseDTO'
  ResponseGetSkillsApplicants:
    type: object
    properties:
      messages:
        $ref: '#/definitions/ResponseMessages'
      data:
        $ref : '#/definitions/ResponseDataSkillsApplicants'
  ResponsePostSkillsApplicants:
    type: object
    properties:
      messages:
        $ref: '#/definitions/ResponseMessages'
      data:
        $ref : '#/definitions/RegistrarCompetenciasDTO'
  ResponsePutSkillsApplicants:
    type: object
    properties:
      messages:
        $ref: '#/definitions/ResponseMessages'
      data:
        $ref : '#/definitions/RespuestaActualizarpersonaCompetenciaDTO'
  ResponseGetSkillsApplicantsByCode:
    type: object
    properties:
      messages:
        $ref: '#/definitions/ResponseMessages'
      data:
        $ref : '#/definitions/ResponseDataSkillsApplicantsByCode'
  ResponseDataSkillsApplicantsByCode:
    type: object
    properties:
      skills:
        $ref: '#/definitions/ResponseArraySkillsApplicantsByCode'
  ResponseArraySkillsApplicantsByCode:
    type: array
    items:
      $ref: '#/definitions/CompetenciaReducidapersonaDTO'
  ResponseGetSkillsSources:
    type: object
    properties:
      messages:
        $ref: '#/definitions/ResponseMessages'
      data:
        $ref : '#/definitions/ResponseDataSkillsSources'
  ResponseDataSkillsSources:
    type: object
    properties:
      sources:
        $ref: '#/definitions/ResponseArraySkillsSources'
  ResponseArraySkillsSources:
    type: array
    items:
      $ref: '#/definitions/ListarFuentesDTO'
  ResponseGetSkillsByCodeApplicantsByCode:
    type: object
    properties:
      messages:
        $ref: '#/definitions/ResponseMessages'
      data:
        $ref : '#/definitions/ResponseDataSkillsByCodeApplicantsByCode'
  ResponseDataSkillsByCodeApplicantsByCode:
    type: object
    properties:
      skill:
        $ref: '#/definitions/ObtenerDetalleCompetenciapersonaDTO'
  ResponsePutSkillsByCodeApplicantsByCode:
    type: object
    properties:
      messages:
        $ref: '#/definitions/ResponseMessages'
      data:
        $ref : '#/definitions/ResponsePutDataSkillsByCodeApplicantsByCode'
  ResponsePutDataSkillsByCodeApplicantsByCode:
    type: object
    properties:
      skill:
        $ref: '#/definitions/ContenidoValidacionDTO'
    
  View:
    type: object
    properties:
      contentType:
        type: string
    title: View